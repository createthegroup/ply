window.Ply={VERSION:"0.1.5"};
Ply.core=function(){var f={},e=!1;return{notify:function(a,b,c){var g=f[a],h=0,d=g.length;for(g||(f[a]=[]);h<d;h++)g[h].handler.apply(g[h].listener,[a,b,c])},listen:function(a,b,c){var g=f[a],h=a.split(/\s/),d=h.length,e=0;if(d>1)for(;e<d;e++)this.listen(h[e],b,c);else g||(f[a]=[]),g.push({handler:b,listener:c})},log:function(a,b){if(e&&window.console)switch(b){case "warn":console.warn(a);break;case "info":console.info(a);break;default:console.log(a)}},error:function(a,b){if(Ply.config.core.onError&&
typeof Ply.config.core.onError==="function")Ply.config.core.onError(a,b);else throw a;},debug:function(a){e=a||!0;this.log("debugging...","info");this.debugOn=!0;this.debugOn=!1},debugOn:!!e}}(jQuery);
Ply.ajax=function(f){return{request:function(e,a,b){var c=e||{},e=c.type||"GET",g=c.url||"",c=c.data||{};if(Ply.core.debugOn)c.debug=!0;try{return f.ajax({type:e,url:g,data:c,success:function(b){a&&typeof a==="function"&&a(b)},error:function(a){Ply.core.log("AjaxError: "+a.status+" - "+g,"warn");Ply.core.error({name:"AjaxError",message:"Status: "+a.status,description:"URL: "+g},1);b&&typeof b==="function"&&b(a)}})}catch(h){Ply.core.log(h.message),Ply.core.error(h,1)}}}}(jQuery);
Ply.read=function(){return{_create:function(f,e){e=e||Ply.config.read.urlGenerator(f);Ply.read[f]=function(a,b,c){return Ply.ajax.request({url:e,type:"GET",data:a},b,c)}}}}();
Ply.ui=function(f){function e(a,b,c,e,h){var d=this;this.name=a;this.view=b;this.delegate=h;this.opts=f.extend({},Ply.config.ui.defaults,this.opts,c);this.data=f.extend({},this.data,e);if(this.__objects)this.objects={},this.__bindObjects=function(){for(var a in d.__objects)d.__objects.hasOwnProperty(a)&&(d.objects[a]=d.view.find(d.__objects[a]))},this.__bindObjects();if(this.__partials)this.partials={},this.__bindPartials=function(){for(var a in d.__partials)d.__partials.hasOwnProperty(a)&&d.objects[a]&&
d.objects[a].length&&(d.partials[a]=Ply.ui.register(d.__partials[a],{view:d.objects[a],delegate:d}))},this.__bindPartials();if(this.__notifications)for(var i in this.__notifications)this.__notifications.hasOwnProperty(i)&&Ply.core.listen(i,this[this.__notifications[i]],this);this.__init&&typeof this.__init==="function"&&this.__init();return this}return{fn:{},define:function(a,b){var c=this,g=f.extend({},Ply.config.ui.base||{});Ply.read[a]||Ply.read._create(a,b.__url);g.__read=Ply.read[a];this.fn[a]=
function(b,d,g,j){return e.call(f.extend({},c.fn[a].impl),a,b,d,g,j)};this.fn[a].impl=f.extend({},g,b)},register:function(a,b){b=b&&typeof b==="object"?b:{};if(Ply.config.ui.onRegister&&typeof Ply.config.ui.onRegister==="function")Ply.config.ui.onRegister(a,b);if(!b.view)b.view=Ply.config.ui.selectorGenerator(a),Ply.core.log("No view name supplied, implying: "+b.view);return this.start(a,b)},start:function(a,b){Ply.core.log("trying start: "+a,"info");try{return this.fn[a](f(b.view),b.options,b.data,
b.delegate)}catch(c){if(Ply.core.log(a+" failed to start."),Ply.core.error(c,1),Ply.core.debugOn)throw c;}}}}(jQuery);
