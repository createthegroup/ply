var Ply={VERSION:"0.1.3"};
Ply.core=function(d){var e={},b=!1;return{notify:function(a,b,d){var g=e[a],c=0,h=g.length;for(g||(e[a]=[]);c<h;c++)g[c].handler.apply(g[c].listener,[a,b,d])},listen:function(a,b,d){var g=e[a],c=a.split(/\s/),h=c.length,j=0;if(h>1)for(;j<h;j++)this.listen(c[j],b,d);else g||(e[a]=[]),g.push({handler:b,listener:d})},log:function(a,f){if(b&&window.console)switch(f){case "warn":console.warn(a);break;case "info":console.info(a);break;default:console.log(a)}},error:function(a,b){d.post(Ply.config.core.errorLoggingUrl,
{name:a.name,description:a.description,message:a.message,lineNumber:a.lineNumber,stackTrace:a.stack});b>1&&alert("An error has occurred. Please refresh your browser")},debug:function(a){b=a||!0;this.log("debugging...","info");this.debugOn=!0;this.debugOn=!1},debugOn:!!b}}(jQuery);
Ply.ajax=function(d){return{request:function(e,b,a){var f=e||{},e=f.type||"GET",i=f.url||"",f=f.data||{};if(Ply.core.debugOn)f.debug=!0;try{return d.ajax({type:e,url:i,data:f,success:function(a){b&&typeof b==="function"&&b(a)},error:function(b){Ply.core.log("AjaxError: "+b.status+" - "+i,"warn");Ply.core.error({name:"AjaxError",message:"Status: "+b.status,description:"URL: "+i},1);a&&typeof a==="function"&&a(b)}})}catch(g){Ply.core.log(g.message),Ply.core.error(g,1)}}}}(jQuery);
Ply.read=function(){return{_create:function(d,e){e=e||Ply.config.read.urlGenerator(d);Ply.read[d]=function(b,a,d){return Ply.ajax.request({url:e,type:"GET",data:b},a,d)}}}}();
Ply.ui=function(d){function e(b,a,f,e,g){var c=this;this.name=b;this.view=a;this.delegate=g;this.opts=d.extend({},Ply.config.ui.defaults,this.opts,f);this.data=d.extend({},this.data,e);if(this.__objects)this.objects={},this.__bindObjects=function(){for(var a in c.__objects)c.__objects.hasOwnProperty(a)&&(c.objects[a]=c.view.find(c.__objects[a]))},this.__bindObjects();if(this.__partials)this.partials={},this.__bindPartials=function(){for(var a in c.__partials)c.__partials.hasOwnProperty(a)&&c.objects[a]&&
c.objects[a].length&&(c.partials[a]=Ply.ui.register(c.__partials[a],{view:c.objects[a],delegate:c}))},this.__bindPartials();if(this.__notifications)for(var h in this.__notifications)this.__notifications.hasOwnProperty(h)&&Ply.core.listen(h,this[this.__notifications[h]],this);this.__init&&typeof this.__init==="function"&&this.__init();return this}return{fn:{},define:function(b,a){var f=this,i=d.extend({},Ply.config.ui.base||{});Ply.read[b]||Ply.read._create(b,a.__url);i.__read=Ply.read[b];this.fn[b]=
function(a,c,h,i){return e.call(d.extend({},f.fn[b].impl),b,a,c,h,i)};this.fn[b].impl=d.extend({},i,a)},register:function(b,a){a=a||{};if(Ply.config.ui.onRegister&&typeof Ply.config.ui.onRegister==="function")Ply.config.ui.onRegister(b,a);if(!a.view)a.view=Ply.config.ui.selectorGenerator(b),Ply.core.log("No view name supplied, implying: "+a.view);return this.start(b,a)},start:function(b,a){Ply.core.log("trying start: "+b,"info");try{return this.fn[b](d(a.view),a.options,a.data,a.delegate)}catch(e){if(Ply.core.log(b+
" failed to start."),Ply.core.error(e,1),Ply.core.debugOn)throw e;}}}}(jQuery);
