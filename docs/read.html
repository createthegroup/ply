<!DOCTYPE html>  <html> <head>   <title>read.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="ajax.html">                 ajax.js               </a>                                           <a class="source" href="config.html">                 config.js               </a>                                           <a class="source" href="core.html">                 core.js               </a>                                           <a class="source" href="read.html">                 read.js               </a>                                           <a class="source" href="ui.html">                 ui.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               read.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*global Ply */</span>
<span class="cm">/*jshint eqeqeq: true, curly: true, white: true */</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The Read module is an abstraction on top of Ajax for loading particular
views, or named URLs.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>By convention, every view defined has a read method created for it on <code>Ply.read</code>.
That URL can be explicitly defined using a <code>__url</code> property on the view, or can be
automatically generated by a function assigned to <code>Ply.config.read.urlGenerator</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>This module also exists as a namespace for user-defined read functions that are created
outside of the automatic view instantiation process. The intention is to avoid explicitly
using <code>Ply.ajax</code> with hardcoded URLs. Instead, clients and views should prefer named methods
corresponding to the data or view being loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Note that this module makes no assumption about REST, and does not handle requests for any
other HTTP verbs. An extension for handling POST and UPDATE requests may come in the future,
but has not yet been deemed useful.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Public Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Define the <code>read</code> module.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Ply</span><span class="p">.</span><span class="nx">read</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h3>Add</h3>

<p>This function is used by clients as well as the UI module to
create new read functions. Usage is to pass in a <code>name</code> and a <code>url</code>
or optionally, you could pass in an object keyed on names
with URLs as values.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Check if the first argument is an object.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>If so, iterate over all own properties.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">n</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">n</span><span class="p">))</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Call the add method again with the name/url pair.</p>             </td>             <td class="code">               <div class="highlight"><pre>                        <span class="nx">Ply</span><span class="p">.</span><span class="nx">read</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">n</span><span class="p">]);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Create a method on <code>Ply.read</code> corresponding to the name.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">failure</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Return the result of calling Ply.ajax.request, so the XHR object
gets returned to the user. Allows them to call methods of the XHR.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">return</span> <span class="nx">Ply</span><span class="p">.</span><span class="nx">ajax</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
                    <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
                    <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span>
                <span class="p">},</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">failure</span><span class="p">);</span>

            <span class="p">};</span>
        <span class="p">}</span>

    <span class="p">};</span>

<span class="p">})();</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>&#8618; <a href="ui.html">UI</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 